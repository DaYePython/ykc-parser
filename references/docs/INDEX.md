# 云快充充电平台协议 - 快速索引

## 📋 文档概览

本协议已按功能模块拆分为多个独立文档,便于查阅和维护。

## 🔍 快速查找

### 基础协议
- **协议概述**: [01-总则/01-协议概述.md](./01-总则/01-协议概述.md)
- **通信接口**: [01-总则/02-通信接口.md](./01-总则/02-通信接口.md)
- **帧格式**: [02-协议基础/02-应用层报文帧格式.md](./02-协议基础/02-应用层报文帧格式.md)
- **帧类型表**: [02-协议基础/05-帧类型定义表.md](./02-协议基础/05-帧类型定义表.md)

### 充电流程
- **上电流程**: [03-通信流程/01-上电流程.md](./03-通信流程/01-上电流程.md)
- **APP充电**: [03-通信流程/02-app充电流程.md](./03-通信流程/02-app充电流程.md)
- **刷卡充电**: [03-通信流程/03-刷卡充电流程.md](./03-通信流程/03-刷卡充电流程.md)
- **离线充电**: [03-通信流程/04-离线充电模式.md](./03-通信流程/04-离线充电模式.md)

### 重要附录
- **CRC16校验**: [11-附录/02-CRC16校验计算方法.md](./11-附录/02-CRC16校验计算方法.md)
- **停止原因代码**: [11-附录/01-充电停止原因代码表.md](./11-附录/01-充电停止原因代码表.md)
- **协议需知**: [11-附录/03-协议需知.md](./11-附录/03-协议需知.md)

## 📁 目录结构

```
docs/
├── README.md                 # 主索引文档
├── 01-总则/                  # 协议总体说明
│   ├── 01-协议概述.md
│   ├── 02-通信接口.md
│   └── 03-接入流程.md
├── 02-协议基础/              # 协议基础定义
│   ├── 01-通信协议结构.md
│   ├── 02-应用层报文帧格式.md
│   ├── 03-数据格式定义.md
│   ├── 04-名词解释.md
│   └── 05-帧类型定义表.md
├── 03-通信流程/              # 业务流程
│   ├── 01-上电流程.md
│   ├── 02-app充电流程.md
│   ├── 03-刷卡充电流程.md
│   └── 04-离线充电模式.md
├── 04-注册心跳/              # 登录和心跳
│   ├── 01-登录认证.md
│   ├── 02-心跳包.md
│   └── 03-计费模型.md
├── 05-实时数据/              # 充电实时数据
│   ├── 01-实时监测数据.md
│   ├── 02-充电握手.md
│   ├── 03-参数配置.md
│   └── ...
├── 06-运营交互/              # 运营相关交互
│   ├── 01-充电启动.md
│   ├── 02-充电停止.md
│   ├── 03-交易记录.md
│   ├── 04-余额更新.md
│   └── 05-离线卡管理.md
├── 07-平台设置/              # 平台配置
│   ├── 01-工作参数设置.md
│   ├── 02-对时设置.md
│   └── 03-计费模型设置.md
├── 08-车位锁/                # 车位锁协议
│   └── 车位锁通信协议.md
├── 09-远程维护/              # 远程维护
│   ├── 01-远程重启.md
│   └── 02-远程更新.md
├── 10-并充模式/              # 双枪并充
│   └── 并充模式协议.md
└── 11-附录/                  # 附录资料
    ├── 01-充电停止原因代码表.md
    ├── 02-CRC16校验计算方法.md
    └── 03-协议需知.md
```

## 🔑 关键概念

| 概念 | 说明 | 文档位置 |
|------|------|---------|
| 交易流水号 | 一次充电操作的统一标记 | [名词解释](./02-协议基础/04-名词解释.md) |
| 物理卡号 | 读卡器读取的卡号,用于与服务器交互 | [名词解释](./02-协议基础/04-名词解释.md) |
| 逻辑卡号 | 卡面印刷的卡号,用于显示 | [名词解释](./02-协议基础/04-名词解释.md) |
| 计费模型 | 费率和时段配置 | 04-注册心跳/03-计费模型.md |
| CRC校验 | 数据完整性校验 | [CRC16校验](./11-附录/02-CRC16校验计算方法.md) |

## ⚠️ 重要规则

1. **90秒响应规则**: 启动命令后90秒内必须回复成功 - [协议需知](./11-附录/03-协议需知.md)
2. **30秒上送规则**: 充电结束后30秒内必须上送交易记录 - [协议需知](./11-附录/03-协议需知.md)
3. **流水号一致性**: 同一订单所有报文的流水号必须一致 - [协议需知](./11-附录/03-协议需知.md)
4. **奇偶数规则**: 桩端报文为奇数,平台报文为偶数 - [帧类型表](./02-协议基础/05-帧类型定义表.md)

## 📞 常用帧类型

| 帧码 | 名称 | 方向 | 文档 |
|------|------|------|------|
| 0x01/0x02 | 登录认证 | ⇄ | 04-注册心跳/01-登录认证.md |
| 0x03/0x04 | 心跳包 | ⇄ | 04-注册心跳/02-心跳包.md |
| 0x13 | 实时监测数据 | → | 05-实时数据/01-实时监测数据.md |
| 0x31/0x32 | 刷卡启动 | ⇄ | 06-运营交互/01-充电启动.md |
| 0x34/0x33 | 远程启动 | ⇄ | 06-运营交互/01-充电启动.md |
| 0x36/0x35 | 远程停机 | ⇄ | 06-运营交互/02-充电停止.md |
| 0x3B/0x40 | 交易记录 | ⇄ | 06-运营交互/03-交易记录.md |

## 💡 使用建议

1. **首次接入**: 按顺序阅读 [01-总则] → [02-协议基础] → [03-通信流程]
2. **开发实现**: 重点关注具体帧类型的数据定义和示例报文
3. **问题排查**: 查阅 [11-附录/03-协议需知.md] 中的注意事项
4. **流程理解**: 参考各流程文档中的Mermaid流程图

## 📚 版本信息

- **协议版本**: V1.6
- **发布日期**: 2020-10-29
- **主要更新**: 增加双枪并充功能
