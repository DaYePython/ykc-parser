# 充电过程BMS交互报文

本章节定义了充电过程中充电桩与BMS(电池管理系统)之间的交互报文,遵循GBT-27930标准。

---

## 7.3 充电握手 (0x15)

### 基本信息

| 项目 | 说明 |
|------|------|
| 帧类型码 | 0x15 |
| 传送间隔 | 主动上送 |
| 数据方向 | 充电桩→运营平台 |

### 功能说明

GBT-27930 充电桩与BMS充电握手阶段报文。

### 样例报文

```
68(起始标志)4D(数据长度)0015(序列号域)00(加密标志)15(类型)
32010200000000111511161555350026(交易流水号)
32010200000001(桩编码)
01(枪号)
000000(BMS通信协议版本号)
00(BMS电池类型)
0000(BMS整车动力蓄电池系统额定容量)
0000(BMS整车动力蓄电池系统额定总电压)
00000000(BMS电池生产厂商名称)
00000000(BMS电池组序号)
00(BMS电池组生产日期年)
00(BMS电池组生产日期月)
00(BMS电池组生产日期日)
000000(BMS电池组充电次数)
00(BMS电池组产权标识)
00(预留位)
00000000000000000000000000000(BMS车辆识别码)
000000000000000000000000(BMS软件版本号)
FED2(帧校验域)
```

### 数据定义

| 序号 | 参数名称 | 数据类型 | 长度(Byte) | 备注 |
|------|----------|----------|------------|------|
| 1 | 交易流水号 | BCD码 | 16 | 见名词解释 |
| 2 | 桩编号 | BCD码 | 7 | 不足7位补0 |
| 3 | 枪号 | BCD码 | 1 | |
| 4 | BMS通信协议版本号 | BIN | 3 | 当前版本为V1.1,表示为:byte3,byte2-0001H;byte1-01H |
| 5 | BMS电池类型 | BIN | 1 | 01H:铅酸电池<br>02H:氢电池<br>03H:磷酸铁锂电池<br>04H:锰酸锂电池<br>05H:钴酸锂电池<br>06H:三元材料电池<br>07H:聚合物锂离子电池<br>08H:钛酸锂电池<br>FFH:其他 |
| 6 | BMS整车动力蓄电池系统额定容量 | BIN | 2 | 0.1Ah/位,0Ah偏移量 |
| 7 | BMS整车动力蓄电池系统额定总电压 | BIN | 2 | 0.1V/位,0V偏移量 |
| 8 | BMS电池生产厂商名称 | BIN | 4 | 标准ASCII码 |
| 9 | BMS电池组序号 | BIN | 4 | 预留,由厂商自行定义 |
| 10 | BMS电池组生产日期年 | BIN | 1 | 1985年偏移量,数据范围:1985~2235年 |
| 11 | BMS电池组生产日期月 | BIN | 1 | 0月偏移量,数据范围:1~12月 |
| 12 | BMS电池组生产日期日 | BIN | 1 | 0日偏移量,数据范围:1~31日 |
| 13 | BMS电池组充电次数 | BIN | 3 | 1次/位,0次偏移量,以BMS统计为准 |
| 14 | BMS电池组产权标识 | BIN | 1 | 0:租赁<br>1:车自有 |
| 15 | 预留位 | BIN | 1 | |
| 16 | BMS车辆识别码 | BIN | 17 | VIN码 |
| 17 | BMS软件版本号 | BIN | 8 | Byte8、byte7、byte6-000001H~FFFFFFEH,预留,填FFFFFFFH<br>Byte5-byte2作为BMS软件版本编译时间信息标记<br>Byte5,byte4-0001H~FFFEH表示"年"<br>Byte3-01H~0CH表示"月"<br>Byte2-01H~1FH表示"日"<br>Byte1-01H~FEH表示版本流水号 |

---

## 7.4 参数配置 (0x17)

### 基本信息

| 项目 | 说明 |
|------|------|
| 帧类型码 | 0x17 |
| 传送间隔 | 主动上送 |
| 数据方向 | 充电桩→运营平台 |

### 功能说明

GBT-27930 充电桩与BMS参数配置阶段报文。

### 样例报文

```
68(起始标志)31(数据长度)0016(序列号域)00(加密标志)17(类型)
32010200000000111511161555350026(交易流水号)
32010200000001(桩编码)
01(枪号)
0000(BMS单体动力蓄电池最高允许充电电压)
0000(BMS最高允许充电电流)
0000(BMS动力蓄电池标称总能量)
0000(BMS最高允许充电总电压)
00(BMS最高允许温度)
0000(BMS整车动力蓄电池荷电状态soc)
0000(BMS整车动力蓄电池当前电池电压)
0000(电桩最高输出电压)
0000(电桩最低输出电压)
0000(电桩最大输出电流)
0000(电桩最小输出电流)
D18A(帧校验域)
```

### 数据定义

| 序号 | 参数名称 | 数据类型 | 长度(Byte) | 备注 |
|------|----------|----------|------------|------|
| 1 | 交易流水号 | BCD码 | 16 | 见名词解释 |
| 2 | 桩编号 | BCD码 | 7 | 不足7位补0 |
| 3 | 枪号 | BCD码 | 1 | |
| 4 | BMS单体动力蓄电池最高允许充电电压 | BIN | 2 | 0.01V/位,0V偏移量;数据范围:0~24V |
| 5 | BMS最高允许充电电流 | BIN | 2 | 0.1A/位,-400A偏移量 |
| 6 | BMS动力蓄电池标称总能量 | BIN | 2 | 0.1kWh/位,0kWh偏移量;数据范围:0~1000kWh |
| 7 | BMS最高允许充电总电压 | BIN | 2 | 0.1V/位,0V偏移量 |
| 8 | BMS最高允许温度 | BIN | 1 | 1°C/位,-50°C偏移量;数据范围:-50°C~+200°C |
| 9 | BMS整车动力蓄电池荷电状态(soc) | BIN | 2 | 0.1%/位,0%偏移量;数据范围:0~100% |
| 10 | BMS整车动力蓄电池当前电池电压 | BIN | 2 | 整车动力蓄电池总电压 |
| 11 | 电桩最高输出电压 | BIN | 2 | 0.1V/位,0V偏移量 |
| 12 | 电桩最低输出电压 | BIN | 2 | 0.1V/位,0V偏移量 |
| 13 | 电桩最大输出电流 | BIN | 2 | 0.1A/位,-400A偏移量 |
| 14 | 电桩最小输出电流 | BIN | 2 | 0.1A/位,-400A偏移量 |

---

## 7.5 充电结束 (0x19)

### 基本信息

| 项目 | 说明 |
|------|------|
| 帧类型码 | 0x19 |
| 传送间隔 | 主动上送 |
| 数据方向 | 充电桩→运营平台 |

### 功能说明

GBT-27930 充电桩与BMS充电结束阶段报文。

### 样例报文

```
68(起始标志)2B(数据长度)0016(序列号域)00(加密标志)19(类型)
32010200000000111511161555350026(交易流水号)
32010200000001(桩编码)
01(枪号)
00(BMS中止荷电状态SOC)
0000(BMS动力蓄电池单体最低电压)
0000(BMS动力蓄电池单体最高电压)
00(BMS动力蓄电池最低温度)
00(BMS动力蓄电池最高温度)
0000(电桩累计充电时间)
0000(电桩输出能量)
00000000(电桩充电机编号)
AE36(帧校验域)
```

### 数据定义

| 序号 | 参数名称 | 数据类型 | 长度(Byte) | 备注 |
|------|----------|----------|------------|------|
| 1 | 交易流水号 | BCD码 | 16 | 见名词解释 |
| 2 | 桩编号 | BCD码 | 7 | 不足7位补0 |
| 3 | 枪号 | BCD码 | 1 | |
| 4 | BMS中止荷电状态SOC | BIN | 1 | 1%/位,0%偏移量;数据范围:0~100% |
| 5 | BMS动力蓄电池单体最低电压 | BIN | 2 | 0.01V/位,0V偏移量;数据范围:0~24V |
| 6 | BMS动力蓄电池单体最高电压 | BIN | 2 | 0.01V/位,0V偏移量;数据范围:0~24V |
| 7 | BMS动力蓄电池最低温度 | BIN | 1 | 1°C/位,-50°C偏移量;数据范围:-50°C~+200°C |
| 8 | BMS动力蓄电池最高温度 | BIN | 1 | 1°C/位,-50°C偏移量;数据范围:-50°C~+200°C |
| 9 | 电桩累计充电时间 | BIN | 2 | 1min/位,0min偏移量;数据范围:0~600min |
| 10 | 电桩输出能量 | BIN | 2 | 0.1kWh/位,0kWh偏移量;数据范围:0~1000kWh |
| 11 | 电桩充电机编号 | BIN | 4 | 充电机编号,1/位,1偏移量,数据范围:0~0xFFFFFFF |

---

## 7.6 错误报文 (0x1B)

### 基本信息

| 项目 | 说明 |
|------|------|
| 帧类型码 | 0x1B |
| 传送间隔 | 主动上送 |
| 数据方向 | 充电桩→运营平台 |

### 功能说明

GBT-27930 充电桩与BMS充电错误报文。

### 样例报文

```
68(起始标志)24(数据长度)0017(序列号域)00(加密标志)1B(类型)
32010200000000111511161555350026(交易流水号)
32010200000001(桩编码)
01(枪号)
00(序号4-6)
00(序号7-9)
00(序号10-12)
00(13-14)
00(15-16)
00(17-19)
00(20-23)
00(24-25)
A2F3(帧校验域)
```

### 数据定义

| 序号 | 参数名称 | 数据类型 | 长度 | 备注 |
|------|----------|----------|------|------|
| 1 | 交易流水号 | BCD码 | 16 Byte | 见名词解释 |
| 2 | 桩编号 | BCD码 | 7 Byte | 不足7位补0 |
| 3 | 枪号 | BCD码 | 1 Byte | |
| 4 | 接收SPN2560=0x00的充电机辨识报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 5 | 接收SPN2560=0xAA的充电机辨识报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 6 | 预留位 | BIN | 4位 | 0000 |
| 7 | 接收充电机的时间同步和充电机最大输出能力报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 8 | 接收充电机完成充电准备报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 9 | 预留位 | BIN | 4位 | 0000 |
| 10 | 接收充电机充电状态报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 11 | 接收充电机中止充电报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 12 | 预留位 | BIN | 4位 | 0000 |
| 13 | 接收充电机充电统计报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 14 | BMS其他 | BIN | 6位 | |
| 15 | 接收BMS和车辆的辨识报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 16 | 预留位 | BIN | 6位 | |
| 17 | 接收电池充电参数报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 18 | 接收BMS完成充电准备报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 19 | 预留位 | BIN | 4位 | |
| 20 | 接收电池充电总状态报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 21 | 接收电池充电要求报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 22 | 接收BMS中止充电报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 23 | 预留位 | BIN | 2位 | |
| 24 | 接收BMS充电统计报文超时 | BIN | 2位 | 00:正常<br>01:超时<br>10:不可信状态 |
| 25 | 充电机其他 | BIN | 6位 | |

---

## 7.7 充电阶段BMS中止 (0x1D)

### 基本信息

| 项目 | 说明 |
|------|------|
| 帧类型码 | 0x1D |
| 传送间隔 | 主动上送 |
| 数据方向 | 充电桩→运营平台 |

### 功能说明

GBT-27930 充电桩与BMS充电阶段BMS中止报文。

### 样例报文

```
68(起始标志)20(数据长度)0018(序列号域)00(加密标志)1D(类型)
32010200000000111511161555350026(交易流水号)
32010200000001(桩编码)
01(枪号)
00(BMS中止充电原因)
0000(BMS中止充电故障原因)
00(BMS中止充电错误原因)
8445(帧校验域)
```

### 数据定义

| 序号 | 参数名称 | 数据类型 | 长度(Byte) | 备注 |
|------|----------|----------|------------|------|
| 1 | 交易流水号 | BCD码 | 16 | 见名词解释 |
| 2 | 桩编号 | BCD码 | 7 | 不足7位补0 |
| 3 | 枪号 | BCD码 | 1 | |
| 4 | BMS中止充电原因 | BIN | 1 | 1-2位:所需求的SOC目标值<br>3-4位:达到总电压的设定值<br>5-6位:达到单体电压设定值<br>7-8位:充电机主动中止 |
| 5 | BMS中止充电故障原因 | BIN | 2 | 1-2位:绝缘故障<br>3-4位:输出连接器过温故障<br>5-6位:BMS元件、输出连接器过温<br>7-8位:充电连接器故障<br>9-10位:电池组温度过高故障<br>11-12位:高压继电器故障<br>13-14位:检测点2电压检测故障<br>15-16位:其他故障 |
| 6 | BMS中止充电错误原因 | BIN | 1 | 1-2位:电流过大<br>3-4位:电压异常<br>5-8位:预留位 |

---

## 7.8 充电阶段充电机中止 (0x21)

### 基本信息

| 项目 | 说明 |
|------|------|
| 帧类型码 | 0x21 |
| 传送间隔 | 主动上送 |
| 数据方向 | 充电桩→运营平台 |

### 功能说明

GBT-27930 充电桩与BMS充电阶段充电机中止报文。

### 样例报文

```
68(起始标志)20(数据长度)0018(序列号域)00(加密标志)21(类型)
32010200000000111511161555350026(交易流水号)
32010200000001(桩编码)
01(枪号)
00(充电机中止充电原因)
0000(充电机中止充电故障原因)
00(充电机中止充电错误原因)
8445(帧校验域)
```

### 数据定义

| 序号 | 参数名称 | 数据类型 | 长度(Byte) | 备注 |
|------|----------|----------|------------|------|
| 1 | 交易流水号 | BCD码 | 16 | 见名词解释 |
| 2 | 桩编号 | BCD码 | 7 | 不足7位补0 |
| 3 | 枪号 | BCD码 | 1 | |
| 4 | 充电机中止充电原因 | BIN | 1 | 1-2位:达到充电机设定的条件中止<br>3-4位:人工中止<br>5-6位:异常中止<br>7-8位:BMS主动中止 |
| 5 | 充电机中止充电故障原因 | BIN | 2 | 1-2位:充电机过温故障<br>3-4位:充电连接器故障<br>5-6位:充电机内部过温故障<br>7-8位:所需电量不能传送<br>9-10位:充电机急停故障<br>11-12位:其他故障<br>13-16位:预留位 |
| 6 | 充电机中止充电错误原因 | BIN | 1 | 1-2位:电流不匹配<br>3-4位:电压异常<br>5-8位:预留位 |

---

## 7.9 充电过程BMS需求与充电机输出 (0x23)

### 基本信息

| 项目 | 说明 |
|------|------|
| 帧类型码 | 0x23 |
| 传送间隔 | 周期上送(15秒) |
| 数据方向 | 充电桩→运营平台 |

### 功能说明

GBT-27930 充电桩与BMS充电过程BMS需求、充电机输出报文。

### 样例报文

```
68(起始标志)30(数据长度)0019(序列号域)00(加密标志)23(类型)
32010200000000111511161555350026(交易流水号)
32010200000001(桩编码)
01(枪号)
0000(BMS电压需求)
0000(BMS电流需求)
00(BMS充电模式)
0000(BMS充电电压测量值)
0000(BMS充电电流测量值)
0000(BMS最高单体动力蓄电池电压及组号)
00(BMS当前荷电状态SOC)
0000(BMS估算剩余充电时间)
0000(电桩电压输出值)
0000(电桩电流输出值)
0000(累计充电时间)
1D57(帧校验域)
```

### 数据定义

| 序号 | 参数名称 | 数据类型 | 长度(Byte) | 备注 |
|------|----------|----------|------------|------|
| 1 | 交易流水号 | BCD码 | 16 | 见名词解释 |
| 2 | 桩编号 | BCD码 | 7 | 不足7位补0 |
| 3 | 枪号 | BCD码 | 1 | |
| 4 | BMS电压需求 | BIN | 2 | 0.1V/位,0V偏移量 |
| 5 | BMS电流需求 | BIN | 2 | 0.1A/位,-400A偏移量 |
| 6 | BMS充电模式 | BIN | 1 | 0x01:恒压充电<br>0x02:恒流充电 |
| 7 | BMS充电电压测量值 | BIN | 2 | 0.1V/位,0V偏移量 |
| 8 | BMS充电电流测量值 | BIN | 2 | 0.1A/位,-400A偏移量 |
| 9 | BMS最高单体动力蓄电池电压及组号 | BIN | 2 | 1-12位:最高单体动力蓄电池电压,数据分辨率:0.01V/位,0V偏移量;数据范围:0~24V<br>13-16位:最高单体动力蓄电池电压所在组号,数据分辨率:1/位,0偏移量;数据范围:0~15 |
| 10 | BMS当前荷电状态SOC(%) | BIN | 1 | 1%/位,0%偏移量;数据范围:0~100% |
| 11 | BMS估算剩余充电时间 | BIN | 2 | 1min/位,0min偏移量;数据范围:0~600min |
| 12 | 电桩电压输出值 | BIN | 2 | 0.1V/位,0V偏移量 |
| 13 | 电桩电流输出值 | BIN | 2 | 0.1A/位,-400A偏移量 |
| 14 | 累计充电时间 | BIN | 2 | 1min/位,0min偏移量;数据范围:0~600min |

---

## 7.10 充电过程BMS信息 (0x25)

### 基本信息

| 项目 | 说明 |
|------|------|
| 帧类型码 | 0x25 |
| 传送间隔 | 周期上送(15秒) |
| 数据方向 | 充电桩→运营平台 |

### 功能说明

GBT-27930 充电桩与BMS充电过程BMS信息报文。

### 样例报文

```
68(起始标志)23(数据长度)0021(序列号域)00(加密标志)25(类型)
32010200000000111511161555350026(交易流水号)
32010200000001(桩编码)
01(枪号)
00(BMS最高单体动力蓄电池电压所在编号)
00(BMS最高动力蓄电池温度)
00(最高温度检测点编号)
00(最低动力蓄电池温度)
00(最低动力蓄电池温度检测点编号)
00(9-12)
00(13-16)
72B9(帧校验域)
```

### 数据定义

| 序号 | 参数名称 | 数据类型 | 长度 | 备注 |
|------|----------|----------|------|------|
| 1 | 交易流水号 | BCD码 | 16 Byte | 见名词解释 |
| 2 | 桩编号 | BCD码 | 7 Byte | 不足7位补0 |
| 3 | 枪号 | BCD码 | 1 Byte | |
| 4 | BMS最高单体动力蓄电池电压所在编号 | BIN | 1 Byte | 1/位,1偏移量;数据范围:1~256 |
| 5 | BMS最高动力蓄电池温度 | BIN | 1 Byte | 1°C/位,-50°C偏移量;数据范围:-50°C~+200°C |
| 6 | 最高温度检测点编号 | BIN | 1 Byte | 1/位,1偏移量;数据范围:1~128 |
| 7 | 最低动力蓄电池温度 | BIN | 1 Byte | 1°C/位,-50°C偏移量;数据范围:-50°C~+200°C |
| 8 | 最低动力蓄电池温度检测点编号 | BIN | 1 Byte | 1/位,1偏移量;数据范围:1~128 |
| 9 | BMS单体动力蓄电池电压过高/过低 | BIN | 2位 | 00:正常<br>01:过高<br>10:过低 |
| 10 | BMS整车动力蓄电池荷电状态SOC过高/过低 | BIN | 2位 | 00:正常<br>01:过高<br>10:过低 |
| 11 | BMS动力蓄电池充电过电流 | BIN | 2位 | 00:正常<br>01:过流<br>10:不可信状态 |
| 12 | BMS动力蓄电池温度过高 | BIN | 2位 | 00:正常<br>01:过流<br>10:不可信状态 |
| 13 | BMS动力蓄电池绝缘状态 | BIN | 2位 | 00:正常<br>01:过流<br>10:不可信状态 |
| 14 | BMS动力蓄电池组输出连接器连接状态 | BIN | 2位 | 00:正常<br>01:过流<br>10:不可信状态 |
| 15 | 充电禁止 | BIN | 2位 | 00:禁止<br>01:允许 |
| 16 | 预留位 | BIN | 2位 | 00 |
